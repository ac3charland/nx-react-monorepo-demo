# NxReactMonorepoDemo

<a alt="Nx logo" href="https://nx.dev" target="_blank" rel="noreferrer"><img src="https://raw.githubusercontent.com/nrwl/nx/master/images/nx-logo.png" width="45"></a>

✨ **This workspace has been generated by [Nx, Smart Monorepos · Fast CI.](https://nx.dev)** ✨

## Integrate with editors

Enhance your Nx experience by installing [Nx Console](https://nx.dev/nx-console) for your favorite editor. Nx Console
provides an interactive UI to view your projects, run tasks, generate code, and more! Available for VSCode, IntelliJ and
comes with a LSP for Vim users.

## Start the application

Run `npx nx serve nx-react-monorepo-demo` to start the development server. Happy coding!

## Run Cypress tests

The `nx-react-monorepo-demo-e2e` app contains the Cypress tests for `nx-react-monorepo-demo`. To run the tests in the command line, run `npx nx e2e nx-react-monorepo-demo-e2e`. To open the Cypress UI and run the tests there, run `npx nx cypress-open nx-react-monorepo-demo-e2e` (the `--watch` flag isn't available in Cypress 13+)

## Build for production

Run `npx nx build nx-react-monorepo-demo` to build the application. The build artifacts are stored in the output directory (e.g. `dist/` or `build/`), ready to be deployed.

## Running tasks

To execute tasks with Nx use the following syntax:

```
npx nx <target> <project> <...options>
```

You can also run multiple targets:

```
npx nx run-many -t <target1> <target2>
```

..or add `-p` to filter specific projects

```
npx nx run-many -t <target1> <target2> -p <proj1> <proj2>
```

Targets can be defined in the `package.json` or `projects.json`. Learn more [in the docs](https://nx.dev/features/run-tasks).

## Using the Nx Console VSCode Extension

In the VSCode extensions tab, install the `Nx Console` extension by `nrwl`.

## Using the extension to generate code

(You may want to collapse the "Nx Cloud" tab in the extension to see "Common NX Commands")

### Generating React components in libs

1. Under "Common Nx Commands" select Generate (UI)
2. Select `@nx/react - library` from the dropdown
2. Under "Name" enter `components`
    - This will generate a `components.tsx` and `componetns.spec.tsx` file that will be deleted. 
    - But we still want the library to be accessbile as `@components` in the `apps/` directory, hence the name
3. Under "Directory" enter `libs/components/`
4. In `tsconfig.base.json` rename the path from `@[project-name]/components` to `@components` or whatever you'd like to use for importing
5. Set up the exports/folder structure however you like, but I prefer to keep all reusable components in one library to reduce the need for regenerating libs. You could also organize by Atomic Design or other paradigms.
6. Under `libs/components/src/lib/` create a folders for each reusable component. I like to have each folder have an `index.ts` file with all the named exports for the component, so the top level `components/index.ts` file can have a line like: `export * from './lib/[component-folder]` for each component
7. If using Tailwind:
   - Note that as of the writing of these docs, if using TailWind the generated component will have a line like `import styled from 'tailwind'`. Can't figure out how to fix this or if it's an error, so I've deleted it.
   - You WON'T need to run a Tailwind setup command for the `components/` directory by using the Nx extension. Each app's `tailwind.config.js` setup file should automatically detect the `libs/` the app requires and purge unused classes accordingly. See [this guide](https://blog.nrwl.io/setup-next-js-to-use-tailwind-with-nx-849b7e21d8d0#bec0).

### Creating a documentation app with Docusaurus

1. Install the [community plugin for docusaurus](https://github.com/ZachJW34/nx-plus/tree/master/libs/docusaurus) with `npm i -D @nx-plus/docusaurus`
2. Generate the app via command line with `npx nx generate @nx-plus/docusaurus:app docs`
3. At the time of writing, the above plugin installed an old version of docusaurus with an outdated React depenency, which caused a conflict with nx when running `npm install`. Interest in the plugin on npm is dwindling so it's uncertain if this will be updated in the future. Updating the versions of `@docusaurus/core`, `@docusaurus/preset-classic`, and `@docusaurus/module-type-aliases` (or any other docusaurus-related modules) to the latest version helped resolve this.
4. Run with `npx nx serve docs`


### Creating a typescript-only library (non-frontend)

Useful for a `utils/`, `constants/` or `services/` directory.

1. Using the VSCode extension, run `Generate (UI)` > `@nx/js - library`
2. For usage exclusively by frontend apps within the monorepo, select "none" for the bundler. Set the directory to "libs/[name]" and the import path to "@[name]"

## Set up CI!

Nx comes with local caching already built-in (check your `nx.json`). On CI you might want to go a step further.

- [Set up remote caching](https://nx.dev/features/share-your-cache)
- [Set up task distribution across multiple machines](https://nx.dev/nx-cloud/features/distribute-task-execution)
- [Learn more how to setup CI](https://nx.dev/recipes/ci)

## Explore the project graph

Run `npx nx graph` to show the graph of the workspace.
It will show tasks that you can run with Nx.

- [Learn more about Exploring the Project Graph](https://nx.dev/core-features/explore-graph)

## Connect with us!

- [Join the community](https://nx.dev/community)
- [Subscribe to the Nx Youtube Channel](https://www.youtube.com/@nxdevtools)
- [Follow us on Twitter](https://twitter.com/nxdevtools)
